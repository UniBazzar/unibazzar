%% Version: 1.0
graph TD
  meta["ğŸ“Š UniBazzar: FAANG-Grade Microservices Architecture<br/>Version: 1.0 | Date: 2025-08-17 | Author: UniBazzar"]

  subgraph Clients ["ğŸ–¥ï¸ Client Applications"]
    C1[ğŸ“± React PWA / Mobile Client<br/>ğŸŒ Web Dashboard<br/>ğŸ“§ Admin Panel]
  end

  subgraph Cloud_Infrastructure["â˜ï¸ Cloud Infrastructure (AWS - Production Ready)"]
    GW[ğŸšª API Gateway / Edge<br/>Load Balancer<br/>Rate Limiting]
    I[ğŸ“¨ Message Broker<br/>RabbitMQ<br/>Topic Exchange]
    
    subgraph K8s["ğŸ³ Container Layer (Docker / Kubernetes)"]
      A[ğŸ” auth-service<br/>Go + JWT<br/>Postgres owner]
      L[ğŸ“‹ listing-service<br/>Go + DDD<br/>DynamoDB owner]
      O[ğŸ›’ order-service<br/>Go + Saga<br/>Outbox Pattern]
      P[ğŸ’³ payments-service<br/>Go + Chapa<br/>Webhook Handler]
      AI[ğŸ¤– ai-service<br/>FastAPI + ML<br/>Embeddings & NLP]
      N[ğŸ“¢ notifications-service<br/>Go + Push/Email<br/>Multi-channel]
      CH[ğŸ’¬ chat-gateway<br/>Bun/TypeScript<br/>Real-time Edge]
      SI[ğŸ” search-indexer<br/>Go Consumer<br/>OpenSearch Writer]
    end

    subgraph Data["ğŸ—„ï¸ Data & Storage Tier"]
      PG[(ğŸ˜ PostgreSQL<br/>RDS Managed<br/>ACID Transactions)]
      DDB[(âš¡ DynamoDB<br/>High Throughput<br/>NoSQL Documents)]
      OS[(ğŸ” OpenSearch<br/>Full-text Search<br/>Analytics)]
      S3[(ğŸ“¦ S3 Storage<br/>Media & Assets<br/>CDN Ready)]
      VEC[(ğŸ§  Vector DB<br/>FAISS/Milvus<br/>AI Embeddings)]
      REDIS[(ğŸš€ Redis Cache<br/>Session Store<br/>Rate Limiting)]
    end

    subgraph Observability ["ğŸ“Š Observability Stack"]
      JAEGER[ğŸ” Jaeger<br/>Distributed Tracing]
      PROM[ğŸ“ˆ Prometheus<br/>Metrics Collection]
      GRAF[ğŸ“Š Grafana<br/>Dashboards]
      OTEL[ğŸ¯ OpenTelemetry<br/>Unified Observability]
    end
  end

  %% Client connections
  C1 -->|ğŸ”’ HTTPS / REST / gRPC| GW
  GW --> A
  GW --> L
  GW --> O
  GW --> P
  GW --> AI
  GW --> N
  GW --> CH

  %% Service to database connections
  A --> |ğŸ” User Auth| PG
  P --> |ğŸ’° Payments| PG
  L --> |ğŸ“‹ Listings| DDB
  O --> |ğŸ›’ Orders| DDB
  L --> |ğŸ“· Media| S3
  AI --> |ğŸ§  Vectors| VEC
  SI --> |ğŸ” Search Index| OS
  CH --> |âš¡ Sessions| REDIS

  %% Event flows
  P --> |ğŸ’³ payment.completed| I
  L --> |ğŸ“‹ listing.created| I
  O --> |ğŸ›’ order.updated| I
  I --> |ğŸ“¨ Events| N
  I --> |ğŸ” Index Updates| SI
  I --> |ğŸ¤– AI Processing| AI

  %% Observability connections
  A -.-> OTEL
  L -.-> OTEL  
  O -.-> OTEL
  P -.-> OTEL
  AI -.-> OTEL
  N -.-> OTEL
  CH -.-> OTEL
  SI -.-> OTEL
  
  OTEL --> JAEGER
  OTEL --> PROM
  PROM --> GRAF

  %% Styling
  classDef services fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000;
  classDef databases fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000;
  classDef infrastructure fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px,color:#000;
  classDef clients fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000;
  classDef observability fill:#fce4ec,stroke:#880e4f,stroke-width:2px,color:#000;
  
  class A,L,O,P,AI,N,CH,SI services;
  class PG,DDB,OS,S3,VEC,REDIS databases;
  class GW,I infrastructure;
  class C1 clients;
  class JAEGER,PROM,GRAF,OTEL observability;
